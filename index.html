{\rtf1\ansi\ansicpg1252\cocoartf2761
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fnil\fcharset0 Menlo-Regular;}
{\colortbl;\red255\green255\blue255;\red70\green137\blue204;\red23\green24\blue24;\red140\green211\blue254;
\red202\green202\blue202;\red109\green109\blue109;\red194\green126\blue101;\red212\green212\blue212;\red113\green192\blue131;
\red109\green115\blue120;\red183\green111\blue247;\red167\green197\blue152;\red54\green192\blue160;\red246\green124\blue48;
\red163\green79\blue131;}
{\*\expandedcolortbl;;\cssrgb\c33725\c61176\c83922;\cssrgb\c11765\c12157\c12549;\cssrgb\c61176\c86275\c99608;
\cssrgb\c83137\c83137\c83137;\cssrgb\c50196\c50196\c50196;\cssrgb\c80784\c56863\c47059;\cssrgb\c86275\c86275\c86275;\cssrgb\c50588\c78824\c58431;
\cssrgb\c50196\c52549\c54510;\cssrgb\c77255\c54118\c97647;\cssrgb\c70980\c80784\c65882;\cssrgb\c23922\c78824\c69020;\cssrgb\c98039\c56471\c24314;
\cssrgb\c70588\c40000\c58431;}
\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\fs28 \cf2 \cb3 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 <!DOCTYPE\cf4 \strokec4  html\cf2 \strokec2 >\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 <\cf2 \strokec2 html\cf5 \strokec5  \cf4 \strokec4 lang\cf6 \strokec6 =\cf7 \strokec7 "en"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cf6 \cb3 \strokec6 <\cf2 \strokec2 head\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3     \cf6 \strokec6 <\cf2 \strokec2 meta\cf5 \strokec5  \cf4 \strokec4 charset\cf6 \strokec6 =\cf7 \strokec7 "UTF-8"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 <\cf2 \strokec2 meta\cf5 \strokec5  \cf4 \strokec4 name\cf6 \strokec6 =\cf7 \strokec7 "viewport"\cf5 \strokec5  \cf4 \strokec4 content\cf6 \strokec6 =\cf7 \strokec7 "width=device-width, initial-scale=1.0"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 <\cf2 \strokec2 title\cf6 \strokec6 >\cf5 \strokec5 Creative Writing Task\cf6 \strokec6 </\cf2 \strokec2 title\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 <\cf2 \strokec2 script\cf5 \strokec5  \cf4 \strokec4 src\cf6 \strokec6 =\cf7 \strokec7 "https://cdn.tailwindcss.com"\cf6 \strokec6 ></\cf2 \strokec2 script\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 <\cf2 \strokec2 link\cf5 \strokec5  \cf4 \strokec4 rel\cf6 \strokec6 =\cf7 \strokec7 "preconnect"\cf5 \strokec5  \cf4 \strokec4 href\cf6 \strokec6 =\cf7 \strokec7 "https://fonts.googleapis.com"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 <\cf2 \strokec2 link\cf5 \strokec5  \cf4 \strokec4 rel\cf6 \strokec6 =\cf7 \strokec7 "preconnect"\cf5 \strokec5  \cf4 \strokec4 href\cf6 \strokec6 =\cf7 \strokec7 "https://fonts.gstatic.com"\cf5 \strokec5  \cf4 \strokec4 crossorigin\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 <\cf2 \strokec2 link\cf5 \strokec5  \cf4 \strokec4 href\cf6 \strokec6 =\cf7 \strokec7 "https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"\cf5 \strokec5  \cf4 \strokec4 rel\cf6 \strokec6 =\cf7 \strokec7 "stylesheet"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 <\cf2 \strokec2 style\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf2 \strokec2 body\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 font-family:\cf5 \strokec5  \cf9 \strokec9 'Inter'\cf8 \strokec8 ,\cf5 \strokec5  \cf7 \strokec7 sans-serif\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf10 \strokec10 /* Simple animation for generated ideas */\cf5 \cb1 \strokec5 \
\cb3         \cf11 \strokec11 @keyframes\cf5 \strokec5  \cf7 \strokec7 fadeIn\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf7 \strokec7 from\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \strokec5  \cf4 \strokec4 opacity:\cf5 \strokec5  \cf12 \strokec12 0\cf8 \strokec8 ;\cf5 \strokec5  \cf4 \strokec4 transform:\cf5 \strokec5  \cf7 \strokec7 translateY(\cf12 \strokec12 10px\cf7 \strokec7 )\cf8 \strokec8 ;\cf5 \strokec5  \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf7 \strokec7 to\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \strokec5  \cf4 \strokec4 opacity:\cf5 \strokec5  \cf12 \strokec12 1\cf8 \strokec8 ;\cf5 \strokec5  \cf4 \strokec4 transform:\cf5 \strokec5  \cf7 \strokec7 translateY(\cf12 \strokec12 0\cf7 \strokec7 )\cf8 \strokec8 ;\cf5 \strokec5  \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf2 \strokec2 .fade-in\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 animation:\cf5 \strokec5  \cf7 \strokec7 fadeIn\cf5 \strokec5  \cf12 \strokec12 0.5s\cf5 \strokec5  \cf7 \strokec7 ease-out\cf5 \strokec5  \cf7 \strokec7 forwards\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 </\cf2 \strokec2 style\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 </\cf2 \strokec2 head\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cf6 \cb3 \strokec6 <\cf2 \strokec2 body\cf5 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf7 \strokec7 "bg-gray-50 text-gray-800 flex items-center justify-center min-h-screen p-4"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\
\pard\pardeftab720\partightenfactor0
\cf5 \cb3     \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf7 \strokec7 "w-full max-w-2xl bg-white rounded-xl shadow-lg p-6 md:p-8 border border-gray-200"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cb1 \
\cb3         \cf10 \strokec10 <!-- Header Section -->\cf5 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf7 \strokec7 "text-center mb-6"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 h1\cf5 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf7 \strokec7 "text-3xl font-bold text-gray-900"\cf6 \strokec6 >\cf5 \strokec5 Creative Writing Task\cf6 \strokec6 </\cf2 \strokec2 h1\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 p\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "instructions"\cf5 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf7 \strokec7 "mt-2 text-gray-600"\cf6 \strokec6 >\cf5 \strokec5 We would like you to write a story about \cf6 \strokec6 <\cf2 \strokec2 span\cf5 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf7 \strokec7 "font-semibold text-indigo-600"\cf6 \strokec6 >\cf5 \strokec5 ...\cf6 \strokec6 </\cf2 \strokec2 span\cf6 \strokec6 >\cf5 \strokec5 . The story must be exactly \cf6 \strokec6 <\cf2 \strokec2 strong\cf6 \strokec6 >\cf5 \strokec5 eight sentences\cf6 \strokec6 </\cf2 \strokec2 strong\cf6 \strokec6 >\cf5 \strokec5  long and appropriate for a teenage and young adult audience.\cf6 \strokec6 </\cf2 \strokec2 p\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\
\cb3         \cf10 \strokec10 <!-- Idea Generation Section -->\cf5 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf7 \strokec7 "mb-6"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf7 \strokec7 "flex justify-center"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf2 \strokec2 button\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "generate-idea-btn"\cf5 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf7 \strokec7 "bg-indigo-600 text-white font-semibold py-2 px-5 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 shadow-sm disabled:bg-gray-400 disabled:cursor-not-allowed"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3                     Generate Story Idea...\cb1 \
\cb3                 \cf6 \strokec6 </\cf2 \strokec2 button\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "idea-container"\cf5 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf7 \strokec7 "mt-4 space-y-3"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3                 \cf10 \strokec10 <!-- Generated ideas will be appended here -->\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\
\cb3         \cf10 \strokec10 <!-- Story Writing Section -->\cf5 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 <\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 label\cf5 \strokec5  \cf4 \strokec4 for\cf6 \strokec6 =\cf7 \strokec7 "story-textarea"\cf5 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf7 \strokec7 "block text-sm font-medium text-gray-700 mb-1"\cf6 \strokec6 >\cf5 \strokec5 Your Story\cf6 \strokec6 </\cf2 \strokec2 label\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 textarea\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "story-textarea"\cf5 \strokec5  \cf4 \strokec4 rows\cf6 \strokec6 =\cf7 \strokec7 "10"\cf5 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf7 \strokec7 "w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"\cf5 \strokec5  \cf4 \strokec4 placeholder\cf6 \strokec6 =\cf7 \strokec7 "Start writing your 8-sentence story here..."\cf6 \strokec6 ></\cf2 \strokec2 textarea\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf7 \strokec7 "flex justify-between items-center mt-2 text-sm"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf2 \strokec2 p\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "sentence-count"\cf5 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf7 \strokec7 "text-gray-500"\cf6 \strokec6 >\cf5 \strokec5 Sentence count: 0 / 8\cf6 \strokec6 </\cf2 \strokec2 p\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3                 \cf6 \strokec6 <\cf2 \strokec2 p\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "message-box"\cf5 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf7 \strokec7 "font-medium"\cf6 \strokec6 ></\cf2 \strokec2 p\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\
\cb3         \cf10 \strokec10 <!-- Submission Button -->\cf5 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf7 \strokec7 "mt-6 text-center"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 button\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "submit-btn"\cf5 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf7 \strokec7 "bg-green-600 text-white font-bold py-2.5 px-8 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-200 shadow-sm"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3                 Submit Story\cb1 \
\cb3             \cf6 \strokec6 </\cf2 \strokec2 button\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\
\cb3     \cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\
\cb3     \cf6 \strokec6 <\cf2 \strokec2 script\cf5 \strokec5  \cf4 \strokec4 type\cf6 \strokec6 =\cf7 \strokec7 "module"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf10 \strokec10 // --- CONFIGURATION ---\cf5 \cb1 \strokec5 \
\cb3         \cf11 \strokec11 const\cf5 \strokec5  \cf13 \strokec13 MAX_IDEAS\cf5 \strokec5  \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 5\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf11 \strokec11 const\cf5 \strokec5  \cf13 \strokec13 REQUIRED_SENTENCES\cf5 \strokec5  \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 8\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf11 \strokec11 const\cf5 \strokec5  \cf13 \strokec13 STORY_TOPICS\cf5 \strokec5  \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 [\cf5 \cb1 \strokec5 \
\cb3             \cf9 \strokec9 'an adventure on the open seas'\cf8 \strokec8 ,\cf5 \cb1 \strokec5 \
\cb3             \cf9 \strokec9 'an adventure in the jungle'\cf8 \strokec8 ,\cf5 \cb1 \strokec5 \
\cb3             \cf9 \strokec9 'an adventure on a different planet'\cf8 \strokec8 ,\cf5 \cb1 \strokec5 \
\cb3             \cf9 \strokec9 'a mystery in a small town'\cf8 \strokec8 ,\cf5 \cb1 \strokec5 \
\cb3             \cf9 \strokec9 'a magical discovery in an old library'\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 ];\cf5 \cb1 \strokec5 \
\
\cb3         \cf10 \strokec10 // --- DOM ELEMENTS ---\cf5 \cb1 \strokec5 \
\cb3         \cf11 \strokec11 const\cf5 \strokec5  instructionsEl \cf8 \strokec8 =\cf5 \strokec5  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'instructions'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf11 \strokec11 const\cf5 \strokec5  generateIdeaBtn \cf8 \strokec8 =\cf5 \strokec5  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'generate-idea-btn'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf11 \strokec11 const\cf5 \strokec5  ideaContainer \cf8 \strokec8 =\cf5 \strokec5  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'idea-container'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf11 \strokec11 const\cf5 \strokec5  storyTextarea \cf8 \strokec8 =\cf5 \strokec5  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'story-textarea'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf11 \strokec11 const\cf5 \strokec5  sentenceCountEl \cf8 \strokec8 =\cf5 \strokec5  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'sentence-count'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf11 \strokec11 const\cf5 \strokec5  messageBox \cf8 \strokec8 =\cf5 \strokec5  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'message-box'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf11 \strokec11 const\cf5 \strokec5  submitBtn \cf8 \strokec8 =\cf5 \strokec5  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'submit-btn'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\
\cb3         \cf10 \strokec10 // --- STATE ---\cf5 \cb1 \strokec5 \
\cb3         \cf11 \strokec11 let\cf5 \strokec5  ideaCount \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf11 \strokec11 let\cf5 \strokec5  currentTopic \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 ''\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\
\cb3         \cf10 \strokec10 // --- GEMINI API SETUP ---\cf5 \cb1 \strokec5 \
\cb3         \cf11 \strokec11 const\cf5 \strokec5  apiKey \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 ""\cf8 \strokec8 ;\cf5 \strokec5  \cf10 \strokec10 // Canvas will provide the key at runtime\cf5 \cb1 \strokec5 \
\cb3         \cf11 \strokec11 const\cf5 \strokec5  apiUrl \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=\cf8 \strokec8 $\{\cf5 \strokec5 apiKey\cf8 \strokec8 \}\cf9 \strokec9 `\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\
\cb3         \cf10 \strokec10 /**\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf10 \cb3 \strokec10          * Fetches a story idea from the Gemini API with exponential backoff for retries.\cf5 \cb1 \strokec5 \
\cf10 \cb3 \strokec10          * @param \{string\} topic - The story topic for the prompt.\cf5 \cb1 \strokec5 \
\cf10 \cb3 \strokec10          * @returns \{Promise<string>\} - The generated story idea text.\cf5 \cb1 \strokec5 \
\cf10 \cb3 \strokec10          */\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3         \cf11 \strokec11 async\cf5 \strokec5  \cf11 \strokec11 function\cf5 \strokec5  getAIStoryIdea\cf8 \strokec8 (\cf5 \strokec5 topic\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 const\cf5 \strokec5  prompt \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 `Write a three-sentence summary of a story about \cf8 \strokec8 $\{\cf5 \strokec5 topic\cf8 \strokec8 \}\cf9 \strokec9 .`\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 const\cf5 \strokec5  payload \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 contents\cf8 \strokec8 :\cf5 \strokec5  \cf8 \strokec8 [\{\cf5 \strokec5  parts\cf8 \strokec8 :\cf5 \strokec5  \cf8 \strokec8 [\{\cf5 \strokec5  text\cf8 \strokec8 :\cf5 \strokec5  prompt \cf8 \strokec8 \}]\cf5 \strokec5  \cf8 \strokec8 \}],\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \};\cf5 \cb1 \strokec5 \
\
\cb3             \cf11 \strokec11 let\cf5 \strokec5  delay \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 1000\cf8 \strokec8 ;\cf5 \strokec5  \cf10 \strokec10 // Start with 1 second\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 for\cf5 \strokec5  \cf8 \strokec8 (\cf11 \strokec11 let\cf5 \strokec5  i \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \strokec5  i \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 5\cf8 \strokec8 ;\cf5 \strokec5  i\cf8 \strokec8 ++)\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \strokec5  \cf10 \strokec10 // Retry up to 5 times\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 try\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     \cf11 \strokec11 const\cf5 \strokec5  response \cf8 \strokec8 =\cf5 \strokec5  \cf11 \strokec11 await\cf5 \strokec5  fetch\cf8 \strokec8 (\cf5 \strokec5 apiUrl\cf8 \strokec8 ,\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                         method\cf8 \strokec8 :\cf5 \strokec5  \cf9 \strokec9 'POST'\cf8 \strokec8 ,\cf5 \cb1 \strokec5 \
\cb3                         headers\cf8 \strokec8 :\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \strokec5  \cf9 \strokec9 'Content-Type'\cf8 \strokec8 :\cf5 \strokec5  \cf9 \strokec9 'application/json'\cf5 \strokec5  \cf8 \strokec8 \},\cf5 \cb1 \strokec5 \
\cb3                         body\cf8 \strokec8 :\cf5 \strokec5  \cf13 \strokec13 JSON\cf8 \strokec8 .\cf5 \strokec5 stringify\cf8 \strokec8 (\cf5 \strokec5 payload\cf8 \strokec8 ),\cf5 \cb1 \strokec5 \
\cb3                     \cf8 \strokec8 \});\cf5 \cb1 \strokec5 \
\
\cb3                     \cf11 \strokec11 if\cf5 \strokec5  \cf8 \strokec8 (!\cf5 \strokec5 response\cf8 \strokec8 .\cf5 \strokec5 ok\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                         \cf11 \strokec11 throw\cf5 \strokec5  \cf11 \strokec11 new\cf5 \strokec5  \cf13 \strokec13 Error\cf8 \strokec8 (\cf9 \strokec9 `API request failed with status \cf8 \strokec8 $\{\cf5 \strokec5 response\cf8 \strokec8 .\cf5 \strokec5 status\cf8 \strokec8 \}\cf9 \strokec9 `\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                     \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3                     \cf11 \strokec11 const\cf5 \strokec5  result \cf8 \strokec8 =\cf5 \strokec5  \cf11 \strokec11 await\cf5 \strokec5  response\cf8 \strokec8 .\cf5 \strokec5 json\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                     \cf11 \strokec11 const\cf5 \strokec5  text \cf8 \strokec8 =\cf5 \strokec5  result\cf8 \strokec8 .\cf5 \strokec5 candidates\cf8 \strokec8 ?.[\cf14 \strokec14 0\cf8 \strokec8 ]?.\cf5 \strokec5 content\cf8 \strokec8 ?.\cf5 \strokec5 parts\cf8 \strokec8 ?.[\cf14 \strokec14 0\cf8 \strokec8 ]?.\cf5 \strokec5 text\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cb1 \
\cb3                     \cf11 \strokec11 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 text\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                         \cf11 \strokec11 return\cf5 \strokec5  text\cf8 \strokec8 .\cf5 \strokec5 trim\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                     \cf8 \strokec8 \}\cf5 \strokec5  \cf11 \strokec11 else\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                         \cf11 \strokec11 throw\cf5 \strokec5  \cf11 \strokec11 new\cf5 \strokec5  \cf13 \strokec13 Error\cf8 \strokec8 (\cf9 \strokec9 "Invalid response structure from API."\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                     \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \strokec5  \cf11 \strokec11 catch\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 error\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     console\cf8 \strokec8 .\cf5 \strokec5 error\cf8 \strokec8 (\cf9 \strokec9 `Attempt \cf8 \strokec8 $\{\cf5 \strokec5 i \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 \}\cf9 \strokec9  failed:`\cf8 \strokec8 ,\cf5 \strokec5  error\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                     \cf11 \strokec11 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 i \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 4\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \strokec5  \cf10 \strokec10 // Don't wait after the last attempt\cf5 \cb1 \strokec5 \
\cb3                         \cf11 \strokec11 await\cf5 \strokec5  \cf11 \strokec11 new\cf5 \strokec5  \cf13 \strokec13 Promise\cf8 \strokec8 (\cf5 \strokec5 resolve \cf8 \strokec8 =>\cf5 \strokec5  setTimeout\cf8 \strokec8 (\cf5 \strokec5 resolve\cf8 \strokec8 ,\cf5 \strokec5  delay\cf8 \strokec8 ));\cf5 \cb1 \strokec5 \
\cb3                         delay \cf8 \strokec8 *=\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 ;\cf5 \strokec5  \cf10 \strokec10 // Double the delay for the next retry\cf5 \cb1 \strokec5 \
\cb3                     \cf8 \strokec8 \}\cf5 \strokec5  \cf11 \strokec11 else\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                         \cf11 \strokec11 return\cf5 \strokec5  \cf9 \strokec9 "Sorry, I couldn't generate an idea right now. Please try again later."\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf10 \strokec10 /**\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf10 \cb3 \strokec10          * Handles the click event for the "Generate Story Idea" button.\cf5 \cb1 \strokec5 \
\cf10 \cb3 \strokec10          */\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3         \cf11 \strokec11 async\cf5 \strokec5  \cf11 \strokec11 function\cf5 \strokec5  handleGenerateIdea\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 ideaCount \cf8 \strokec8 >=\cf5 \strokec5  \cf13 \strokec13 MAX_IDEAS\cf8 \strokec8 )\cf5 \strokec5  \cf11 \strokec11 return\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\
\cb3             generateIdeaBtn\cf8 \strokec8 .\cf5 \strokec5 disabled \cf8 \strokec8 =\cf5 \strokec5  \cf11 \strokec11 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             generateIdeaBtn\cf8 \strokec8 .\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'Generating...'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\
\cb3             \cf11 \strokec11 const\cf5 \strokec5  ideaText \cf8 \strokec8 =\cf5 \strokec5  \cf11 \strokec11 await\cf5 \strokec5  getAIStoryIdea\cf8 \strokec8 (\cf5 \strokec5 currentTopic\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             ideaCount\cf8 \strokec8 ++;\cf5 \cb1 \strokec5 \
\cb3             displayGeneratedIdea\cf8 \strokec8 (\cf5 \strokec5 ideaText\cf8 \strokec8 ,\cf5 \strokec5  ideaCount\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\
\cb3             generateIdeaBtn\cf8 \strokec8 .\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'Generate Story Idea...'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 ideaCount \cf8 \strokec8 >=\cf5 \strokec5  \cf13 \strokec13 MAX_IDEAS\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 generateIdeaBtn\cf8 \strokec8 .\cf5 \strokec5 disabled \cf8 \strokec8 =\cf5 \strokec5  \cf11 \strokec11 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 generateIdeaBtn\cf8 \strokec8 .\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 `Max \cf8 \strokec8 $\{\cf13 \strokec13 MAX_IDEAS\cf8 \strokec8 \}\cf9 \strokec9  ideas reached`\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \strokec5  \cf11 \strokec11 else\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                  generateIdeaBtn\cf8 \strokec8 .\cf5 \strokec5 disabled \cf8 \strokec8 =\cf5 \strokec5  \cf11 \strokec11 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf10 \strokec10 /**\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf10 \cb3 \strokec10          * Creates and displays a new idea element in the UI.\cf5 \cb1 \strokec5 \
\cf10 \cb3 \strokec10          * @param \{string\} text - The text of the idea.\cf5 \cb1 \strokec5 \
\cf10 \cb3 \strokec10          * @param \{number\} count - The number of the idea (e.g., 1, 2, 3).\cf5 \cb1 \strokec5 \
\cf10 \cb3 \strokec10          */\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3         \cf11 \strokec11 function\cf5 \strokec5  displayGeneratedIdea\cf8 \strokec8 (\cf5 \strokec5 text\cf8 \strokec8 ,\cf5 \strokec5  count\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 const\cf5 \strokec5  ideaEl \cf8 \strokec8 =\cf5 \strokec5  document\cf8 \strokec8 .\cf5 \strokec5 createElement\cf8 \strokec8 (\cf9 \strokec9 'div'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             ideaEl\cf8 \strokec8 .\cf5 \strokec5 className \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'p-4 bg-gray-100 border border-gray-200 rounded-lg fade-in'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf11 \strokec11 const\cf5 \strokec5  header \cf8 \strokec8 =\cf5 \strokec5  document\cf8 \strokec8 .\cf5 \strokec5 createElement\cf8 \strokec8 (\cf9 \strokec9 'h3'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             header\cf8 \strokec8 .\cf5 \strokec5 className \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'font-semibold text-sm text-gray-800 mb-1'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             header\cf8 \strokec8 .\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 `Generated Idea \cf8 \strokec8 $\{\cf5 \strokec5 count\cf8 \strokec8 \}\cf9 \strokec9 `\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf11 \strokec11 const\cf5 \strokec5  content \cf8 \strokec8 =\cf5 \strokec5  document\cf8 \strokec8 .\cf5 \strokec5 createElement\cf8 \strokec8 (\cf9 \strokec9 'p'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             content\cf8 \strokec8 .\cf5 \strokec5 className \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'text-gray-700'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             content\cf8 \strokec8 .\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  text\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             ideaEl\cf8 \strokec8 .\cf5 \strokec5 appendChild\cf8 \strokec8 (\cf5 \strokec5 header\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             ideaEl\cf8 \strokec8 .\cf5 \strokec5 appendChild\cf8 \strokec8 (\cf5 \strokec5 content\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             ideaContainer\cf8 \strokec8 .\cf5 \strokec5 appendChild\cf8 \strokec8 (\cf5 \strokec5 ideaEl\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cb1 \
\cb3         \cf10 \strokec10 /**\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf10 \cb3 \strokec10          * Counts the number of sentences in the textarea and updates the UI.\cf5 \cb1 \strokec5 \
\cf10 \cb3 \strokec10          */\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3         \cf11 \strokec11 function\cf5 \strokec5  updateSentenceCount\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 const\cf5 \strokec5  text \cf8 \strokec8 =\cf5 \strokec5  storyTextarea\cf8 \strokec8 .\cf5 \strokec5 value\cf8 \strokec8 .\cf5 \strokec5 trim\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 text \cf8 \strokec8 ===\cf5 \strokec5  \cf9 \strokec9 ''\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 sentenceCountEl\cf8 \strokec8 .\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 `Sentence count: 0 / \cf8 \strokec8 $\{\cf13 \strokec13 REQUIRED_SENTENCES\cf8 \strokec8 \}\cf9 \strokec9 `\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 sentenceCountEl\cf8 \strokec8 .\cf5 \strokec5 classList\cf8 \strokec8 .\cf5 \strokec5 remove\cf8 \strokec8 (\cf9 \strokec9 'text-red-500'\cf8 \strokec8 ,\cf5 \strokec5  \cf9 \strokec9 'text-green-600'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 return\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf10 \strokec10 // Split by sentence-ending punctuation. Handles multiple punctuation.\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 const\cf5 \strokec5  sentences \cf8 \strokec8 =\cf5 \strokec5  text\cf8 \strokec8 .\cf5 \strokec5 match\cf8 \strokec8 (\cf15 \strokec15 /[^.!?]+[.!?]+/\cf11 \strokec11 g\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 ||\cf5 \strokec5  \cf8 \strokec8 [];\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 const\cf5 \strokec5  count \cf8 \strokec8 =\cf5 \strokec5  sentences\cf8 \strokec8 .\cf5 \strokec5 length\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\
\cb3             sentenceCountEl\cf8 \strokec8 .\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 `Sentence count: \cf8 \strokec8 $\{\cf5 \strokec5 count\cf8 \strokec8 \}\cf9 \strokec9  / \cf8 \strokec8 $\{\cf13 \strokec13 REQUIRED_SENTENCES\cf8 \strokec8 \}\cf9 \strokec9 `\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf11 \strokec11 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 count \cf8 \strokec8 ===\cf5 \strokec5  \cf13 \strokec13 REQUIRED_SENTENCES\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 sentenceCountEl\cf8 \strokec8 .\cf5 \strokec5 classList\cf8 \strokec8 .\cf5 \strokec5 add\cf8 \strokec8 (\cf9 \strokec9 'text-green-600'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 sentenceCountEl\cf8 \strokec8 .\cf5 \strokec5 classList\cf8 \strokec8 .\cf5 \strokec5 remove\cf8 \strokec8 (\cf9 \strokec9 'text-red-500'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \strokec5  \cf11 \strokec11 else\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 sentenceCountEl\cf8 \strokec8 .\cf5 \strokec5 classList\cf8 \strokec8 .\cf5 \strokec5 add\cf8 \strokec8 (\cf9 \strokec9 'text-red-500'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 sentenceCountEl\cf8 \strokec8 .\cf5 \strokec5 classList\cf8 \strokec8 .\cf5 \strokec5 remove\cf8 \strokec8 (\cf9 \strokec9 'text-green-600'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 return\cf5 \strokec5  count\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf10 \strokec10 /**\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf10 \cb3 \strokec10          * Handles the story submission logic.\cf5 \cb1 \strokec5 \
\cf10 \cb3 \strokec10          */\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3         \cf11 \strokec11 function\cf5 \strokec5  handleSubmit\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 const\cf5 \strokec5  count \cf8 \strokec8 =\cf5 \strokec5  updateSentenceCount\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 count \cf8 \strokec8 ===\cf5 \strokec5  \cf13 \strokec13 REQUIRED_SENTENCES\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 messageBox\cf8 \strokec8 .\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 "Success! Your story has been submitted."\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 messageBox\cf8 \strokec8 .\cf5 \strokec5 className \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'font-medium text-green-600'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf10 \strokec10 // In a real app, you would send the data to a server here.\cf5 \cb1 \strokec5 \
\cb3                 \cf10 \strokec10 // For this example, we'll just disable the inputs.\cf5 \cb1 \strokec5 \
\cb3                 storyTextarea\cf8 \strokec8 .\cf5 \strokec5 disabled \cf8 \strokec8 =\cf5 \strokec5  \cf11 \strokec11 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 submitBtn\cf8 \strokec8 .\cf5 \strokec5 disabled \cf8 \strokec8 =\cf5 \strokec5  \cf11 \strokec11 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 generateIdeaBtn\cf8 \strokec8 .\cf5 \strokec5 disabled \cf8 \strokec8 =\cf5 \strokec5  \cf11 \strokec11 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \strokec5  \cf11 \strokec11 else\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 messageBox\cf8 \strokec8 .\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 `Your story must have exactly \cf8 \strokec8 $\{\cf13 \strokec13 REQUIRED_SENTENCES\cf8 \strokec8 \}\cf9 \strokec9  sentences.`\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 messageBox\cf8 \strokec8 .\cf5 \strokec5 className \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'font-medium text-red-500'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf10 \strokec10 // Clear the message after a few seconds\cf5 \cb1 \strokec5 \
\cb3             setTimeout\cf8 \strokec8 (()\cf5 \strokec5  \cf8 \strokec8 =>\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \strokec5  messageBox\cf8 \strokec8 .\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 ''\cf8 \strokec8 ;\cf5 \strokec5  \cf8 \strokec8 \},\cf5 \strokec5  \cf14 \strokec14 4000\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf10 \strokec10 /**\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf10 \cb3 \strokec10          * Initializes the application on page load.\cf5 \cb1 \strokec5 \
\cf10 \cb3 \strokec10          */\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3         \cf11 \strokec11 function\cf5 \strokec5  initialize\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf10 \strokec10 // Select and display a random topic\cf5 \cb1 \strokec5 \
\cb3             currentTopic \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 STORY_TOPICS\cf8 \strokec8 [\cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 floor\cf8 \strokec8 (\cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 *\cf5 \strokec5  \cf13 \strokec13 STORY_TOPICS\cf8 \strokec8 .\cf5 \strokec5 length\cf8 \strokec8 )];\cf5 \cb1 \strokec5 \
\cb3             instructionsEl\cf8 \strokec8 .\cf5 \strokec5 querySelector\cf8 \strokec8 (\cf9 \strokec9 'span'\cf8 \strokec8 ).\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  currentTopic\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\
\cb3             \cf10 \strokec10 // Attach event listeners\cf5 \cb1 \strokec5 \
\cb3             generateIdeaBtn\cf8 \strokec8 .\cf5 \strokec5 addEventListener\cf8 \strokec8 (\cf9 \strokec9 'click'\cf8 \strokec8 ,\cf5 \strokec5  handleGenerateIdea\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             storyTextarea\cf8 \strokec8 .\cf5 \strokec5 addEventListener\cf8 \strokec8 (\cf9 \strokec9 'input'\cf8 \strokec8 ,\cf5 \strokec5  updateSentenceCount\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             submitBtn\cf8 \strokec8 .\cf5 \strokec5 addEventListener\cf8 \strokec8 (\cf9 \strokec9 'click'\cf8 \strokec8 ,\cf5 \strokec5  handleSubmit\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf10 \strokec10 // --- START THE APP ---\cf5 \cb1 \strokec5 \
\cb3         initialize\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 </\cf2 \strokec2 script\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 </\cf2 \strokec2 body\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cf6 \cb3 \strokec6 </\cf2 \strokec2 html\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\
}